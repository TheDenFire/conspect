
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../2.%20GRASP/">
      
      
        <link rel="next" href="../4.%20Structural%20Patterns/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>3. Creational patterns - Богданунины конспекты</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#factory-method" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Богданунины конспекты" class="md-header__button md-logo" aria-label="Богданунины конспекты" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Богданунины конспекты
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Creational patterns
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Богданунины конспекты" class="md-nav__button md-logo" aria-label="Богданунины конспекты" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Богданунины конспекты
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topic without name
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Object Oriented Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Object Oriented Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20About%20OOP%20and%20three%20principe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. About OOP and three principe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%20GRASP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. GRASP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3. Creational patterns
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3. Creational patterns
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#factory-method" class="md-nav__link">
    <span class="md-ellipsis">
      Factory Method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-factory" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Factory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#builder" class="md-nav__link">
    <span class="md-ellipsis">
      Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#convenience-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Convenience builder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateful-constructor-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Stateful Constructor Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stateful Constructor Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      Смешение билдеров
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-driven-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Interface Driven Builder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prototype" class="md-nav__link">
    <span class="md-ellipsis">
      Prototype
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singleton" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.%20Structural%20Patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Structural Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.%20Behavioral%20patterns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Behavioral patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%20Layered%20architectures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Layered architectures
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operation System
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Operation System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Operation%20System/%D0%9E%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D0%B5%20%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Операционные системы
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Theory Probability
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Theory Probability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Theory%20Probability/%D0%A2%D0%B5%D0%BE%D1%80%D0%B8%D1%8F%20%D0%B2%D0%B5%D1%80%D0%BE%D1%8F%D1%82%D0%BD%D0%BE%D1%81%D1%82%D0%B8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Теория вероятности
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#factory-method" class="md-nav__link">
    <span class="md-ellipsis">
      Factory Method
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-factory" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract Factory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#builder" class="md-nav__link">
    <span class="md-ellipsis">
      Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#convenience-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Convenience builder
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateful-constructor-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Stateful Constructor Builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stateful Constructor Builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      Смешение билдеров
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-driven-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Interface Driven Builder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prototype" class="md-nav__link">
    <span class="md-ellipsis">
      Prototype
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#singleton" class="md-nav__link">
    <span class="md-ellipsis">
      Singleton
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>3. Creational patterns</h1>

<p><a href="../2.%20GRASP/">2. GRASP</a>
Суть пораждающих паттернов заключается в абстракции над механизмами создания обьектов. Применяются для того, чтобы отделять логику создания обьектов, от логики выполнения операций. </p>
<h2 id="factory-method"><strong>Factory Method</strong><a class="headerlink" href="#factory-method" title="Permanent link">&para;</a></h2>
<p>Суть паттерна заключается в вынесении логики создания обьектов, нужных при выполнении какой-либо операции в абстрактные методы типа, содержащего логику операции, эти методы будут реализованы типами наследниками. </p>
<p>Состоит из двух иерархий: иерархия Creator и иерархие Product
<img alt="Image title!" src="../photos/20241123014154.png" /></p>
<p>Плюсы
Механизм отделяет создание обьектов и операции бизнес логики, с такой точки зрения соблюдается SRP (ну почти)
Механизм позволяет поддерживать OCP, так как можно добавлять реализации для любых новых типов без изменения кода самой операции.
Минусы
Механизм вводит необязательную связанность типов через наследование. Композиция в любом случае лучше наследования, так как наследование тесно связывает типы на этапе компиляции. Иерархии типов не достает модульности, в любом случае вместо фабричного метода стоит использовать абстрактные фабрики. 
Так как конкретные создатели, жестко привязаны к реализации операции базового класса, добавление новой вариации реализации операции будет вести к дубликации конкретных создалей. </p>
<h2 id="abstract-factory"><strong>Abstract Factory</strong><a class="headerlink" href="#abstract-factory" title="Permanent link">&para;</a></h2>
<p>Этот паттерн является усовершенствованной версией паттерна фабричный метод. При реализации абстрактной фабрики, мы полностью отделяем реализацию создания обьектов от реализации операций. 
Фабрика - обьект, у которого есть набор фабричных методов, задачей которого является только создание обьектов из набора иерархий, которые фабрика поддерживает. Абстрактая она потому, что ее фабричные методы возвращают абстракции иерархий обьектов (абстрактные классы, интерфейсы)
    В большенстве источников целью фабрики указывают создание семейства абстрактых обьектов, но ничего не мешает создавать фабрику для одной иерархии.</p>
<p>Плюсы
В отличие от фабричного метода, абстрактная. фабрика по-настоящему отделяет создание обьектов от выполнения операций, соответственно соблюдается SRP
Так же соблюдается OCP, так как добавления новой комбинации создаваемых обьектов, нужно добавить новую реализацию фабрики. </p>
<p>Различие фабрики, фабричного метода и абстрактной фабрики
Фабрика отвечает за создание обьектов одним методом, определяющим нужный класс на основе параметров. 
Фабричный метод использует наследование и позволяет подклассам определять тип создаваемого обьекта.
Абстрактная фабрика управляет целыми семействами связанных обьектов, не указывая их конкретные классы.</p>
<h2 id="builder"><strong>Builder</strong><a class="headerlink" href="#builder" title="Permanent link">&para;</a></h2>
<p>Паттерн строитель является абстракией над вызовом сложных конструкторов обьектов. Паттерн предоставляет возможность собирать обьекты пошагово, и/или без указания некоторых аргументов. Строитель может быть абстрактным, создавать в итоге обьекты различных типов из иерархии. </p>
<p>Главная идея паттерна - отделение логики агрегации аргументов, от самой логики создания обьектов</p>
<p>Строитель предоставляет методы для задания обьекту различных атрибутов (пример на машине: двигатель, цвет кузова, подвеска и так далее), соответственно метод Build создает обьект с заданными характеристиками. 
В рамках паттерна строитель существует еще одна абстракция - директор. Директор - это набор сценариев использования строителя. Директор хранит в себе обьект строителя и предоставяет пользователю методы, содержащие набор вызовов методов строителя, таким образом, директор содержит в себе часто используемые сценарии использования строителя. 
В шарпах директоры могут быть реализованы в виде методов расширения, так как полиморфизм обеспечивается на уровне строителя, так что директор как отдельный обьект не особо нужен. 
В примере данном на диаграмме есть две сущности: машина и инструкция к ней. ДЛя создания инструкции к машине, требуется та же информация как и для создания самой машины, соответственно у их строителей будет общий интерфейс. В примере существвует директор, в нем реализованы методы для создания внедорожника и спортивной машины. 
<img alt="Image title!" src="../photos/20241123021002.png" />
Реализация
Конкретный строитель должен иметь поля, дублирующие параметры конструктора создаваемого обьекта. При вызове метода Build, должен создаваться новый обьект, через вызов конструктора. Ни на каком этапе, в строителе не должен храниться созданный обьект. Заданные через методы строителя значения должны быть провалидированны на наличие значений, при отсутствии, должен быть выкинут эксепшен, либо предоставлено дефолтное значение, если реализация билдера это подразумевает. </p>
<p><strong>Виды билдеров</strong></p>
<h3 id="convenience-builder">Convenience builder<a class="headerlink" href="#convenience-builder" title="Permanent link">&para;</a></h3>
<p>Данный строитель, используется для упрощения создания обьектов с большими конструкторами. Такие строители могут быть спокойно определены отдельно от типов, которые они конструируют, так как строитель должен делать лишь тривиальную валидацию подаваемых значений, а вся логика валидации находится в конструкторе создаваемого типа. </p>
<h3 id="stateful-constructor-builder">Stateful Constructor Builder<a class="headerlink" href="#stateful-constructor-builder" title="Permanent link">&para;</a></h3>
<p>Данный строитель используется когда агрегация данных для конструирования делается пошагово. По сути это конструктор, имеющий стейт. 
Юзкейсами могут быть коллекции обьектов в параметрах конструктора, когда получение значений обьектов реализуется не в одном месте, а в нескольких (Например значения получаются на разных View в UI)</p>
<p>Stateful Constructor отличается от Convenience тем, что на нем лежит логика валидации входящих данных, фактически он является конструктором типа, имеющим какое-либо состояние. 
Stateful constructor builder обычно используется для создания моделей, следовательно основаная логика будет как раз логикой конструирования. </p>
<p>Так как такой билдер непосредственно инкапсулирует логику валидации, то конструктор модели будет ее лишен, и создание модели через него должно быть невозможно через клиентский код (иначе прийдется дублировать ее в конструкторе). Такая проблема решается путем реализации билдера в виде вложенного класса и приватного конструктора самой модели. </p>
<h4 id="_1">Смешение билдеров<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>Когда созданный билдер становится смесью Convenience и Stateful Constructor, то скорее всего вы смешали в конструируемом типе слишком много зависимостей. 
Зачастую лучшим решением будет выделение той части значений, которая требует Stateful Constructor инициализации в отдельную модель, и написание пошагового билдера для нее. 
В целом это не железное правило, реализации строителя сильно зависит от создаваемого типа (НЕ НАОБОРОТ), так что различные вариации возможны, но в рамках лаб не надо. </p>
<h3 id="interface-driven-builder">Interface Driven Builder<a class="headerlink" href="#interface-driven-builder" title="Permanent link">&para;</a></h3>
<p>При реализации строителей, может возникнуть надобность в задании обязательных аргументов для обьекта. Для того, чтобы контракты кода соблюдались, нужно энфорсить их так, чтобы без их соблюдения компиляция была невозможна. Другими словами, не через документацию к проекту, где говориться о том, какие методы нужно обязательно вызывать на строителях.
Первое наивное решение - параметры конструктора строителя. Если мы добавим в конструктор строителя обязательные параметры, то сам объект строителя нельзя будет создать их не указав. Основное преимущество такого подхода - простота, но недостатки у него тоже есть. Мы возвращаемся к вызову конструктора, вызов которого совершенно не похож на fluent-API строителя, что с определённого количества параметров будет сильно выделяться.
Решением такой проблемы с сохранением fluent-API являются интерфейсно-направленные строители.
Их суть довольно простая. Разбить методы строителя на интерфейсы. Для задания каждого обязательного аргумента должен быть свой интерфейс, метод которого должен иметь возвращаемый тип - интерфейс для задания следующего обязательного аргумента. Метод последнего интерфейса обязательного аргумента должен возвращать интерфейс для задания необязательных аргументов и создания объекта.</p>
<h2 id="prototype"><strong>Prototype</strong><a class="headerlink" href="#prototype" title="Permanent link">&para;</a></h2>
<p>Паттерн, предназначенный для инкапсуляции операции копирования обьектов внутри самих обьектов. Использование этого паттерна имеет преимущество над созданием копии извне, так как структура обьекта может быть недоступна извне, также тип копируемого обьекта может находится в иерархии, и клиентский код может не знать конкретный тип копируемого обьекта. 
<img alt="Photo" src="../photos/20241123021440.png" />
Реализация
Прототип может быть реализован как обобщенный тип, используя рекурсивные женерики (передача типа, реализующего интерфейс как аргумент типа); </p>
<h2 id="singleton"><strong>Singleton</strong><a class="headerlink" href="#singleton" title="Permanent link">&para;</a></h2>
<p>Паттерн применяемый для гарантии наличия одного обьекта на время выполнения кода системы. 
Стандартно реализуется наличием статического поля в типа синглтона, инициализируемого при запросе к значению вызовом. </p>
<p>Для потокобезопасности используется подход double check lock. Первый раз проверяем, было ли инициализированно значение ранее, вторая проверка нужна, чтобы убедится не был ли инициализирован обьект другим потоком, пока текущий висел на локе. </p>
<p>В шарпах можно использовпть тип Lazy<T> для инициализации значения, его конструктор принимает настройки потокобезопасности
- <code>None</code> - не гарантируется потокобезопасность, при инициализации несколькими потоками одновременно, фабричный метод вызовется несколько раз, значение, оставшееся в ленивом объекте будет инициализировано одним из потоков, каким - неопределенно.
- <code>PublicationOnly</code> - при данной опции фабричный метод так же вызовется много раз, если несколько потоков начнут инициализацию одновременно, но значение в ленивом объекте будет инициализированно тем, что было создано первым зашедшим потоком.
- <code>ExecutionAndPublication</code> - данная опция гарантирует полную потокобезопасность. Фабричный метод будет вызыван только один раз.</p>
<p>Проблемы
    Тестирование
    Внедрение зависимостей
    Время жизни обьекта
    Статический стейт
Решения
    Решением всех этих проблем довольно простоей - не делать синглтон. В реальных приложениях используются LoC(DI) контейнеры, так что для создания синглтона в рамках проектируемой системы, можно добавлять обьекты с Singleton лайфтаймом. </p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>